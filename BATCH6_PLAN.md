# 第六批功能规划文档

## 📋 功能清单

### 1. 成就系统前端实现（网易云勋章风格）⭐⭐⭐⭐⭐

### 2. 情侣挑战功能 🏆⭐⭐⭐⭐⭐

### 3. 点菜板增强 🍽️⭐⭐⭐⭐

### 4. 健身鼓励增强 💬⭐⭐⭐

---

## 🏆 成就系统前端实现

### 成就定义（8大类，40+小成就）

#### 1. 运动达人 🏃
- 跑步达人：完成 10km / 50km / 200km
- 瑜伽之星：完成 10次 / 50次 / 200次
- 健身房常客：完成 30次 / 100次 / 365次
- 游泳健将：完成 5km / 20km / 100km
- 骑行爱好者：完成 50km / 200km / 1000km
- 运动全能：尝试 3种 / 5种 / 8种运动

#### 2. 体重管理 ⚖️
- 减重达人：减重 3kg / 5kg / 10kg
- 增重达人：增重 3kg / 5kg / 10kg
- 体重稳定：保持目标体重 7天 / 30天 / 100天
- 目标达成：完成 1个 / 3个 / 5个减肥目标

#### 3. 坚持之星 ⭐
- 连续打卡：连续 7天 / 30天 / 100天
- 早起运动：早上6-8点运动 10次 / 30次 / 100次
- 周末不懈：周末运动 4次 / 20次 / 52次
- 全年无休：一年内运动 100次 / 200次 / 365次

#### 4. 情侣互动 💑
- 互相鼓励：点赞对方 10次 / 50次 / 200次
- 暖心评论：评论对方 10次 / 50次 / 200次
- 情侣挑战：完成 1个 / 5个 / 10个挑战
- 共同进步：同一天运动 10次 / 30次 / 100次

#### 5. 记录达人 📝
- 日记作家：写日记 10篇 / 50篇 / 200篇
- 相册管理：上传照片 50张 / 200张 / 1000张
- 心情记录：记录心情 30次 / 100次 / 365次
- 账本达人：记账 30笔 / 100笔 / 365笔

#### 6. 浪漫时刻 💝
- 纪念日守护：记录 3个 / 10个 / 20个纪念日
- 承诺守护：完成 5个 / 20个 / 50个承诺
- 愿望实现：实现 3个 / 10个 / 30个愿望
- 百事达成：完成 10件 / 50件 / 100件事

#### 7. 探索世界 🗺️
- 足迹收集：记录 5个 / 20个 / 50个足迹
- 城市探索：去过 3个 / 10个 / 30个城市
- 国家旅行：去过 2个 / 5个 / 10个国家

#### 8. 时光见证 ⏰
- 相识纪念：相识 100天 / 365天 / 1000天
- 使用时长：使用APP 30天 / 100天 / 365天
- 时光胶囊：创建 3个 / 10个 / 30个时光胶囊

### UI设计（网易云勋章风格）

#### 成就中心页面结构
```
成就中心
├─ 总览卡片
│   ├─ 总成就数：42个
│   ├─ 已解锁：15个
│   ├─ 总星数：28颗星
│   └─ 完成度：35%
├─ 大类列表
│   ├─ 运动达人 ⭐⭐ [=========>  ] 65%
│   ├─ 体重管理 ⭐ [====>       ] 35%
│   ├─ 坚持之星 ⭐⭐⭐ [============] 95%
│   ├─ 情侣互动 ⭐⭐ [=======>    ] 70%
│   ├─ 记录达人 ⭐ [===>        ] 25%
│   ├─ 浪漫时刻 ⭐⭐⭐ [===========>] 90%
│   ├─ 探索世界 ⚪ [>           ] 5%
│   └─ 时光见证 ⭐⭐ [========>   ] 80%
```

#### 大类详情页面
```
运动达人 ⭐⭐ (65%完成)
├─ [勋章图标] 跑步达人 ⭐⭐
│   ├─ 10km ✓ (已完成)
│   ├─ 50km ✓ (已完成)
│   └─ 200km ○ (进度：120km)
├─ [勋章图标] 瑜伽之星 ⭐
│   ├─ 10次 ✓ (已完成)
│   ├─ 50次 ○ (进度：25次)
│   └─ 100次 ○ (未开始)
└─ [勋章图标] 健身房常客 ⭐⭐⭐
    ├─ 30次 ✓ (已完成)
    ├─ 100次 ✓ (已完成)
    └─ 365次 ✓ (已完成)
```

#### 勋章样式设计
- **圆形勋章**：直径80px
- **渐变色背景**：
  - 未解锁：灰色
  - 1星：金色渐变
  - 2星：蓝色渐变
  - 3星：紫色渐变
- **图标**：emoji或SVG图标
- **星级显示**：勋章下方显示星星
- **进度环**：环形进度条包围勋章

---

## 🏆 情侣挑战功能

### 挑战类型

#### 1. 运动挑战
- 一起跑步30天
- 一起做瑜伽20次
- 一起去健身房50次
- 一起游泳10次
- 一起骑行100km

#### 2. 减肥挑战
- 一起减重5kg
- 一起达到目标体重
- 一起保持健康饮食30天

#### 3. 习惯挑战
- 一起早起运动21天
- 一起记录饮食30天
- 一起戒糖7天

#### 4. 记录挑战
- 一起写日记30天
- 一起记账30天
- 一起记录心情30天

#### 5. 自定义挑战
- 自己创建挑战内容
- 设定目标和时间
- 邀请对方参加

### 挑战流程

**创建挑战：**
1. 选择挑战类型或自定义
2. 设定挑战目标（数量、次数、时长）
3. 设定挑战时间（开始日期、结束日期）
4. 添加挑战描述和奖励
5. 发送邀请给对方

**接受挑战：**
1. 收到挑战邀请通知
2. 查看挑战详情
3. 接受或拒绝（可以留言说明原因）

**进行挑战：**
1. 各自完成挑战任务
2. 系统自动追踪进度
3. 查看双方进度对比
4. 互相鼓励和督促

**完成挑战：**
1. 达成目标
2. 获得特殊成就勋章
3. 生成挑战证书
4. 可以分享到动态

### UI设计

#### 挑战列表页面
```
情侣挑战
├─ 进行中 (3)
│   ├─ [卡片] 一起跑步30天
│   │   ├─ 进度：15/30天
│   │   ├─ 我：12天 | TA：15天
│   │   └─ 剩余15天
│   ├─ [卡片] 一起减重5kg
│   │   ├─ 进度：3.2/5kg
│   │   ├─ 我：1.5kg | TA：1.7kg
│   │   └─ 剩余20天
│   └─ [卡片] 一起写日记30天
│       ├─ 进度：20/30天
│       ├─ 我：18天 | TA：20天
│       └─ 剩余10天
├─ 已完成 (5)
└─ 创建挑战 [+]
```

#### 挑战详情页面
```
一起跑步30天
├─ 挑战信息
│   ├─ 类型：运动挑战
│   ├─ 目标：连续30天，每天至少跑步1次
│   ├─ 时间：2026-02-01 ~ 2026-03-02
│   └─ 奖励：获得"跑步情侣"成就
├─ 双方进度
│   ├─ 我的进度：[============>   ] 12/30天
│   └─ TA的进度：[===============>] 15/30天
├─ 打卡记录
│   ├─ 2026-02-12：我✓ TA✓
│   ├─ 2026-02-11：我✓ TA✓
│   └─ 2026-02-10：我✗ TA✓
└─ 互相鼓励
    └─ [评论区]
```

---

## 🍽️ 点菜板增强

### 分区布局设计（饭店菜单风格）

#### 菜板分区
```
┌─────────────────────────────────────┐
│         🍽️ 今天吃什么？              │
│                                     │
│  [我的菜单] [TA的菜单]               │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🥩 荤菜区                    │   │
│  │ ├─ 红烧肉 ⭐⭐⭐⭐⭐          │   │
│  │ ├─ 糖醋排骨 ⭐⭐⭐⭐         │   │
│  │ └─ 宫保鸡丁 ⭐⭐⭐⭐⭐        │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🥬 素菜区                    │   │
│  │ ├─ 清炒时蔬 ⭐⭐⭐           │   │
│  │ ├─ 麻婆豆腐 ⭐⭐⭐⭐⭐        │   │
│  │ └─ 凉拌黄瓜 ⭐⭐⭐⭐         │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🍜 主食区                    │   │
│  │ ├─ 米饭 ⭐⭐⭐               │   │
│  │ ├─ 炒面 ⭐⭐⭐⭐⭐           │   │
│  │ └─ 饺子 ⭐⭐⭐⭐             │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🍲 汤品区                    │   │
│  │ ├─ 紫菜蛋花汤 ⭐⭐⭐         │   │
│  │ ├─ 番茄蛋汤 ⭐⭐⭐⭐         │   │
│  │ └─ 排骨汤 ⭐⭐⭐⭐⭐         │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🍰 甜品区                    │   │
│  │ ├─ 提拉米苏 ⭐⭐⭐⭐⭐        │   │
│  │ ├─ 芒果布丁 ⭐⭐⭐⭐         │   │
│  │ └─ 冰淇淋 ⭐⭐⭐⭐⭐         │   │
│  └─────────────────────────────┘   │
│                                     │
│  [🎲 随机点菜] [📜 点菜历史]        │
└─────────────────────────────────────┘
```

### 分区定义
1. **荤菜区** 🥩：肉类、海鲜类
2. **素菜区** 🥬：蔬菜、豆制品
3. **主食区** 🍜：米饭、面条、饺子、包子等
4. **汤品区** 🍲：各种汤类
5. **甜品区** 🍰：甜点、饮品

### 随机点菜功能

#### 功能设计
**基础随机：**
- 点击"随机点菜"按钮
- 从双方菜单中随机选择菜品
- 自动搭配：1荤+1素+1主食+1汤
- 显示随机结果
- 不满意可以重新随机
- 满意后确认点菜

**高级随机（筛选条件）：**
- 选择分区（只从某些分区随机）
- 选择星级（只随机高星级菜品）
- 选择菜单（只从我的/TA的/双方菜单随机）
- 避免重复（排除最近点过的菜）

#### UI设计
```
随机点菜
├─ 筛选条件
│   ├─ 分区：[全部] [荤菜] [素菜] [主食] [汤品] [甜品]
│   ├─ 星级：[全部] [5星] [4星以上] [3星以上]
│   └─ 菜单：[双方] [我的] [TA的]
├─ 随机结果
│   ├─ 🥩 荤菜：红烧肉 ⭐⭐⭐⭐⭐
│   ├─ 🥬 素菜：麻婆豆腐 ⭐⭐⭐⭐⭐
│   ├─ 🍜 主食：炒面 ⭐⭐⭐⭐⭐
│   └─ 🍲 汤品：排骨汤 ⭐⭐⭐⭐⭐
└─ 操作按钮
    ├─ [🎲 重新随机]
    └─ [✓ 就吃这些]
```

### 口味匹配度分析

#### 功能设计
- 分析双方菜单的重合度
- 显示共同喜欢的菜品
- 推荐可能都喜欢的菜
- 显示口味偏好差异

#### UI设计
```
口味匹配度
├─ 匹配度：85% ❤️
├─ 共同喜欢 (12道)
│   ├─ 红烧肉 ⭐⭐⭐⭐⭐ / ⭐⭐⭐⭐⭐
│   ├─ 麻婆豆腐 ⭐⭐⭐⭐⭐ / ⭐⭐⭐⭐
│   └─ ...
├─ 推荐尝试
│   ├─ 你喜欢红烧肉，TA可能也喜欢东坡肉
│   └─ TA喜欢糖醋排骨，你可能也喜欢糖醋里脊
└─ 口味偏好
    ├─ 我：偏爱川菜、辣味
    └─ TA：偏爱粤菜、清淡
```

### 菜品图片上传

#### 功能设计
- 添加/编辑菜品时可以上传图片
- 支持拍照或从相册选择
- 图片自动压缩和裁剪
- 在菜品卡片中显示图片

---

## 💬 健身鼓励增强

### 删除评论功能

#### 功能设计
- 只能删除自己的评论
- 删除需要确认
- 删除后评论数量更新

#### UI设计
```
评论列表
├─ 我的评论
│   ├─ "加油！你最棒！💪"
│   ├─ 2026-02-12 10:30
│   └─ [删除]
└─ TA的评论
    ├─ "继续保持！👍"
    └─ 2026-02-12 11:00
```

### 点赞用户列表

#### 功能设计
- 点击点赞数量查看点赞用户列表
- 显示点赞用户头像和昵称
- 显示点赞时间

#### UI设计
```
点赞列表 (5人)
├─ 👤 包子  2026-02-12 10:30
├─ 👤 烧卖  2026-02-12 11:00
└─ ...
```

### 通知提醒

#### 功能设计
- 收到点赞时显示通知
- 收到评论时显示通知
- 通知显示在Dashboard
- 点击通知跳转到对应记录

---

## 🎨 UI/UX设计要点

### 成就系统
- 网易云勋章风格：圆形勋章，渐变色
- 大类卡片：进度条+星级+完成度百分比
- 小成就：3档合并显示，已完成的亮色，未完成的灰色
- 动画效果：解锁成就时的闪光动画
- 成就墙：展示所有已解锁的成就

### 情侣挑战
- 挑战卡片：渐变背景，显示进度和剩余时间
- 进度对比：双进度条，直观对比双方进度
- 完成庆祝：烟花动画，生成证书
- 挑战邀请：卡片样式，接受/拒绝按钮

### 点菜板增强
- 分区布局：类似饭店菜单，清晰分类
- 随机点菜：转盘动画，增加趣味性
- 口味匹配：心形图标，百分比显示
- 菜品图片：圆角卡片，悬停放大

### 健身鼓励增强
- 删除按钮：只在自己的评论上显示
- 点赞列表：弹窗显示，头像列表
- 通知提醒：红点标记，点击跳转

---

## 📊 数据库设计

### 成就系统（已创建）
- `achievementDefinitions`：成就定义表
- `userAchievementProgress`：用户成就进度表

### 情侣挑战（已创建）
- `challenges`：挑战表
- `challengeProgress`：挑战进度表

### 点菜板（已创建）
- `menuItems`：菜品表（需要添加zone字段）
- `orderHistory`：点菜历史表

### 健身鼓励（已创建）
- `fitnessLikes`：健身点赞表
- `fitnessComments`：健身评论表

---

## 🚀 实现优先级

### P0（本次必须实现）
1. ✅ 成就系统前端（网易云风格）
2. ✅ 情侣挑战基础功能
3. ✅ 点菜板分区布局
4. ✅ 随机点菜功能

### P1（本次尽量实现）
5. ✅ 删除评论功能
6. ✅ 点赞用户列表
7. ✅ 口味匹配度分析

### P2（后续实现）
8. 菜品图片上传
9. 通知提醒系统
10. 挑战证书生成
11. 成就分享功能

---

## 📝 开发计划

### 第1阶段：成就系统（3-4小时）
- 定义40+成就数据
- 实现成就进度计算逻辑
- 实现成就中心页面
- 实现大类详情页面
- 实现网易云勋章风格UI

### 第2阶段：情侣挑战（2-3小时）
- 实现挑战创建页面
- 实现挑战列表页面
- 实现挑战详情页面
- 实现进度追踪逻辑
- 实现挑战完成奖励

### 第3阶段：点菜板增强（2-3小时）
- 重构菜品分区布局
- 实现随机点菜功能
- 实现口味匹配度分析
- 优化UI设计

### 第4阶段：健身鼓励增强（1-2小时）
- 实现删除评论功能
- 实现点赞用户列表
- 优化交互体验

### 第5阶段：测试优化（1-2小时）
- 功能测试
- 性能优化
- UI调整
- 文档编写

**总计：9-14小时**

---

## 💡 创新点

1. **网易云勋章风格**：三档合并，视觉统一，激励效果强
2. **点菜板分区**：模拟真实饭店菜单，更有仪式感
3. **随机点菜**：解决选择困难症，增加趣味性
4. **情侣挑战**：共同目标，互相督促，增进感情
5. **口味匹配**：了解对方口味，推荐新菜品
6. **全面成就**：覆盖APP所有功能模块，游戏化设计

---

准备开始实现！🚀
