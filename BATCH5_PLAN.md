# 第五批功能规划文档

## 📋 功能清单

### 1. 完整成就系统（网易云勋章风格）⭐⭐⭐⭐⭐

### 2. 点菜板功能 🍽️⭐⭐⭐⭐⭐

### 3. 健身互相鼓励（点赞+评论）💬⭐⭐⭐⭐

### 4. 情侣挑战（一起运动）🏆⭐⭐⭐⭐

---

## 🏆 完整成就系统设计

### 成就大类分类

#### 1. 运动达人 🏃
**小成就：**
- 跑步达人：完成 10km / 50km / 200km
- 瑜伽之星：完成 10次 / 50次 / 200次
- 健身房常客：完成 30次 / 100次 / 365次
- 游泳健将：完成 5km / 20km / 100km
- 骑行爱好者：完成 50km / 200km / 1000km
- 运动全能：尝试 3种 / 5种 / 8种运动

#### 2. 体重管理 ⚖️
**小成就：**
- 减重达人：减重 3kg / 5kg / 10kg
- 增重达人：增重 3kg / 5kg / 10kg
- 体重稳定：保持目标体重 7天 / 30天 / 100天
- 目标达成：完成 1个 / 3个 / 5个减肥目标

#### 3. 坚持之星 ⭐
**小成就：**
- 连续打卡：连续 7天 / 30天 / 100天
- 早起运动：早上6-8点运动 10次 / 30次 / 100次
- 周末不懈：周末运动 4次 / 20次 / 52次
- 全年无休：一年内运动 100次 / 200次 / 365次

#### 4. 情侣互动 💑
**小成就：**
- 互相鼓励：点赞对方 10次 / 50次 / 200次
- 暖心评论：评论对方 10次 / 50次 / 200次
- 情侣挑战：完成 1个 / 5个 / 10个挑战
- 共同进步：同一天运动 10次 / 30次 / 100次

#### 5. 记录达人 📝
**小成就：**
- 日记作家：写日记 10篇 / 50篇 / 200篇
- 相册管理：上传照片 50张 / 200张 / 1000张
- 心情记录：记录心情 30次 / 100次 / 365次
- 账本达人：记账 30笔 / 100笔 / 365笔

#### 6. 浪漫时刻 💝
**小成就：**
- 纪念日守护：记录 3个 / 10个 / 20个纪念日
- 承诺守护：完成 5个 / 20个 / 50个承诺
- 愿望实现：实现 3个 / 10个 / 30个愿望
- 百事达成：完成 10件 / 50件 / 100件事

#### 7. 探索世界 🗺️
**小成就：**
- 足迹收集：记录 5个 / 20个 / 50个足迹
- 城市探索：去过 3个 / 10个 / 30个城市
- 国家旅行：去过 2个 / 5个 / 10个国家

#### 8. 时光见证 ⏰
**小成就：**
- 相识纪念：相识 100天 / 365天 / 1000天
- 使用时长：使用APP 30天 / 100天 / 365天
- 时光胶囊：创建 3个 / 10个 / 30个时光胶囊

---

## 🍽️ 点菜板功能设计

### 核心概念
情侣生活中经常遇到"今天吃什么"的问题，点菜板功能让双方可以：
1. 各自维护自己的菜单（喜欢吃的菜）
2. 查看对方的菜单
3. 点菜（从对方菜单中选择）
4. 记录点菜历史

### UI设计

#### 主页面（点菜板）
```
┌─────────────────────────────────────┐
│         🍽️ 今天吃什么？              │
│                                     │
│  [木质背景，装饰一些食材图案]         │
│                                     │
│  ┌──────────┐    ┌──────────┐      │
│  │ 📖 包子的 │    │ 📖 烧卖的 │      │
│  │   菜单   │    │   菜单   │      │
│  │          │    │          │      │
│  │  [打开]  │    │  [打开]  │      │
│  └──────────┘    └──────────┘      │
│                                     │
│  🎲 随机点菜  |  📜 点菜历史         │
└─────────────────────────────────────┘
```

#### 菜单页面
```
┌─────────────────────────────────────┐
│  📖 包子的菜单                       │
│  ← 返回                    [编辑]   │
├─────────────────────────────────────┤
│  🔍 搜索菜品                         │
├─────────────────────────────────────┤
│  分类：[全部] [中餐] [西餐] [小吃]   │
├─────────────────────────────────────┤
│  🍜 红烧牛肉面          ⭐⭐⭐⭐⭐    │
│     最近点：3天前                    │
│     [点这个] [编辑] [删除]           │
├─────────────────────────────────────┤
│  🍕 玛格丽特披萨        ⭐⭐⭐⭐      │
│     最近点：1周前                    │
│     [点这个] [编辑] [删除]           │
├─────────────────────────────────────┤
│  🍱 日式便当            ⭐⭐⭐⭐⭐    │
│     最近点：2天前                    │
│     [点这个] [编辑] [删除]           │
└─────────────────────────────────────┘
```

### 功能详细设计

#### 1. 菜单管理
**添加菜品：**
- 菜品名称（必填）
- 菜品分类（中餐/西餐/日韩料理/小吃/甜品/饮品/其他）
- 喜爱程度（1-5星）
- 菜品图片（可选）
- 备注（可选，如：辣度、口味偏好）

**编辑菜品：**
- 修改菜品信息
- 调整喜爱程度
- 更新备注

**删除菜品：**
- 确认删除
- 删除后不影响历史记录

#### 2. 点菜功能
**手动点菜：**
- 浏览对方菜单
- 选择一道或多道菜
- 添加备注（如：今晚吃这个吧）
- 发送给对方

**随机点菜：**
- 从双方菜单中随机选择
- 可以设置筛选条件（分类、星级）
- 不喜欢可以重新随机
- 满意后确认

**点菜通知：**
- 对方点菜后收到通知
- 可以同意或提出其他建议

#### 3. 点菜历史
**记录内容：**
- 点菜日期
- 点的菜品
- 谁点的
- 是否完成（真的吃了）
- 评价（好吃/一般/不好吃）

**统计分析：**
- 最常点的菜
- 最近30天点菜频率
- 双方口味偏好分析
- 推荐新菜品

#### 4. 特色功能

**口味匹配度：**
- 分析双方菜单的重合度
- 显示共同喜欢的菜品
- 推荐可能都喜欢的菜

**菜品推荐：**
- 根据历史记录推荐
- 根据季节推荐
- 根据天气推荐（如：下雨天推荐火锅）

**挑战模式：**
- "一周不重样"挑战
- "尝试新菜"挑战
- "做饭打卡"挑战

**外卖集成（可选）：**
- 关联外卖平台
- 一键下单
- 记录外卖订单

---

## 💬 健身互相鼓励功能

### 点赞功能
**实现：**
- 每条健身记录可以被点赞
- 显示点赞数量
- 显示是否已点赞
- 点赞后对方收到通知

**UI展示：**
```
[健身记录卡片]
❤️ 5个赞  💬 3条评论
[❤️ 点赞] [💬 评论] [🎉 鼓励]
```

### 评论功能
**实现：**
- 可以评论对方的健身记录
- 支持文字和表情
- 显示评论列表
- 评论后对方收到通知

**快捷鼓励语：**
- "加油！你最棒！💪"
- "坚持就是胜利！🏆"
- "今天也很努力呢！⭐"
- "继续保持！👍"
- "为你骄傲！❤️"

---

## 🏆 情侣挑战功能

### 挑战类型

#### 1. 运动挑战
- 一起跑步30天
- 一起做瑜伽20次
- 一起去健身房50次
- 一起游泳10次

#### 2. 减肥挑战
- 一起减重5kg
- 一起达到目标体重
- 一起保持健康饮食30天

#### 3. 习惯挑战
- 一起早起运动21天
- 一起记录饮食30天
- 一起戒糖7天

#### 4. 自定义挑战
- 自己创建挑战内容
- 设定目标和时间
- 邀请对方参加

### 挑战流程

**创建挑战：**
1. 选择挑战类型或自定义
2. 设定挑战目标
3. 设定挑战时间
4. 发送邀请给对方

**接受挑战：**
1. 收到挑战邀请通知
2. 查看挑战详情
3. 接受或拒绝

**进行挑战：**
1. 各自完成挑战任务
2. 打卡记录进度
3. 查看双方进度
4. 互相鼓励

**完成挑战：**
1. 达成目标
2. 获得特殊成就
3. 生成挑战证书
4. 可以分享

---

## 🎨 UI/UX设计要点

### 成就系统
- 网易云勋章风格：圆形勋章，渐变色
- 大类卡片：进度条+星级+完成度百分比
- 小成就：3档合并显示，已完成的亮色，未完成的灰色
- 动画效果：解锁成就时的闪光动画

### 点菜板
- 木质背景纹理
- 装饰食材图案（番茄、辣椒、葱等）
- 菜单本：翻页效果
- 随机点菜：转盘动画
- 点菜历史：时间轴展示

### 健身鼓励
- 点赞：心形动画
- 评论：气泡样式
- 快捷鼓励：emoji按钮

### 情侣挑战
- 挑战卡片：渐变背景
- 进度对比：双进度条
- 完成庆祝：烟花动画

---

## 📊 数据库设计

### 成就相关表

#### achievements（成就定义表）
- id
- category（大类：运动达人、体重管理等）
- name（成就名称）
- description（描述）
- icon（图标）
- tier1Target / tier2Target / tier3Target（三档目标）
- tier1Reward / tier2Reward / tier3Reward（三档奖励）

#### userAchievements（用户成就表）
- id
- userId
- achievementId
- currentProgress（当前进度）
- tier（当前档次：0/1/2/3）
- unlockedAt（解锁时间）

### 点菜板相关表

#### menuItems（菜品表）
- id
- userId（菜单所有者）
- name（菜品名称）
- category（分类）
- rating（喜爱程度1-5星）
- imageUrl（图片）
- notes（备注）
- createdAt

#### orderHistory（点菜历史表）
- id
- coupleId
- orderedBy（谁点的）
- menuItemIds（点的菜品ID列表）
- orderDate（点菜日期）
- completed（是否完成）
- rating（评价）
- notes（备注）

### 健身鼓励相关表

#### fitnessLikes（健身点赞表）
- id
- recordId（健身记录ID）
- userId（点赞人）
- createdAt

#### fitnessComments（健身评论表）
- id
- recordId
- userId
- content（评论内容）
- createdAt

### 情侣挑战相关表

#### challenges（挑战表）
- id
- coupleId
- createdBy
- type（挑战类型）
- title（标题）
- description（描述）
- targetValue（目标值）
- startDate
- endDate
- status（状态：pending/active/completed/failed）

#### challengeProgress（挑战进度表）
- id
- challengeId
- userId
- currentProgress
- lastUpdated

---

## 🚀 实现优先级

### P0（必须实现）
1. ✅ 成就系统后端（数据库+API）
2. ✅ 成就系统前端（大类+小类+星级）
3. ✅ 点菜板核心功能（菜单管理+点菜）

### P1（重要）
4. ✅ 健身互相鼓励（点赞+评论）
5. ✅ 情侣挑战基础功能

### P2（可选）
6. 点菜板高级功能（随机点菜、口味匹配）
7. 挑战证书生成
8. 成就分享功能

---

## 📝 开发计划

### 第1阶段：成就系统（2-3小时）
- 设计成就定义（8大类，40+小成就）
- 创建数据库表
- 实现后端API
- 实现前端页面（网易云风格）
- 实现成就自动解锁逻辑

### 第2阶段：点菜板（2-3小时）
- 创建数据库表
- 实现菜单管理API
- 实现点菜功能API
- 实现前端页面（木质背景）
- 实现点菜历史

### 第3阶段：健身鼓励（1-2小时）
- 创建点赞评论表
- 实现点赞评论API
- 增强健身记录卡片
- 实现快捷鼓励语

### 第4阶段：情侣挑战（1-2小时）
- 创建挑战相关表
- 实现挑战API
- 实现挑战页面
- 实现进度追踪

### 第5阶段：测试优化（1小时）
- 功能测试
- 性能优化
- UI调整
- 文档编写

**总计：7-11小时**

---

## 💡 创新点

1. **网易云勋章风格**：三档合并，视觉统一
2. **点菜板创意**：解决"今天吃什么"的日常痛点
3. **情侣互动**：不仅记录自己，更注重双方互动
4. **全面成就**：覆盖APP所有功能模块
5. **游戏化设计**：星级、挑战、奖励，增强趣味性
